import{_ as U,u as V,r as c,o as f,c as b,a as e,w as y,b as l,v as s,F as z,d as $,t as D,e as q,p as M,f as S,g as w}from"./index-0bcf8434.js";const o=p=>(M("data-v-f3f3d1f4"),p=p(),S(),p),A={class:""},N=o(()=>e("h2",{class:"text-xl font-bold my-4 text-center text-white"}," 新增電影 ",-1)),B=["onSubmit"],F={class:"flex flex-wrap text-white/80"},L={class:"w-full max-w-full px-3 sm:w-6/12 relative"},R=o(()=>e("label",{for:"floating_movie_title",class:"absolute text-md duration-300 transform -translate-y-4 scale-75 px-4 top-4 z-10 origin-[0] left-2.5 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-4"},"電影名稱",-1)),T={class:"w-full max-w-full px-3 sm:w-6/12 relative"},j=o(()=>e("label",{for:"director",class:"absolute text-md duration-300 transform -translate-y-4 scale-75 px-4 top-4 z-10 origin-[0] left-2.5 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-4"},"導演",-1)),P={class:"w-full max-w-full px-3 sm:w-6/12 relative"},G=o(()=>e("label",{for:"level",class:"absolute text-md duration-300 transform -translate-y-4 scale-75 px-4 top-4 z-10 origin-[0] left-2.5 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-4"},"分級",-1)),H={class:"w-full max-w-full px-3 sm:w-6/12 relative"},J=o(()=>e("label",{for:"time",class:"absolute text-md duration-300 transform -translate-y-4 scale-75 px-4 top-4 z-10 origin-[0] left-2.5 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-4"},"時長",-1)),K={class:"w-full max-w-full px-3 sm:w-6/12 relative"},O=o(()=>e("label",{for:"imgs",class:"absolute text-md duration-300 transform -translate-y-4 scale-75 px-4 top-4 z-10 origin-[0] left-2.5 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-4"},"圖片",-1)),Q={class:"w-full max-w-full px-3 sm:w-6/12 relative"},W=o(()=>e("label",{for:"actors",class:"absolute text-md duration-300 transform -translate-y-4 scale-75 px-4 top-4 z-10 origin-[0] left-2.5 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-4"},"演員",-1)),X={class:"w-full max-w-full px-3 sm:w-6/12 relative"},Y=o(()=>e("label",{for:"videos",class:"absolute text-md duration-300 transform -translate-y-4 scale-75 px-4 top-4 z-10 origin-[0] left-2.5 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-4"},"影片連結",-1)),Z={class:"w-full max-w-full px-3 sm:w-6/12 relative"},ee=o(()=>e("label",{for:"videoImg",class:"absolute text-md duration-300 transform -translate-y-4 scale-75 px-4 top-4 z-10 origin-[0] left-2.5 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-4"},"影片封面圖片",-1)),re={class:"w-full max-w-full px-3 sm:w-6/12 relative"},te=o(()=>e("label",{for:"status",class:"absolute text-md duration-300 transform -translate-y-4 scale-75 px-4 top-4 z-10 origin-[0] left-2.5 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-4"},"狀態",-1)),ae={class:"w-full max-w-full px-3 sm:w-6/12 relative"},oe=o(()=>e("label",{for:"releaseData",class:"absolute text-md duration-300 transform -translate-y-4 scale-75 px-4 top-4 z-10 origin-[0] left-2.5 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-4"},"上映日期",-1)),le={class:"w-full max-w-full px-3 sm:w-12/12 relative"},se=o(()=>e("label",{for:"desc",class:"absolute text-md duration-300 transform -translate-y-4 scale-75 px-4 top-4 z-10 origin-[0] left-2.5 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-4"},"電影說明",-1)),de={class:"w-full max-w-full px-3 sm:w-12/12"},ne=["for"],ue=["id","onChange"],ie=["src"],ce=["onClick"],pe=o(()=>e("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded"}," 新增 ",-1)),fe={__name:"AddNewMovie",setup(p){const h=V(),g=c(""),m=c(""),v=c(""),t=c({name:"",director:"",imgs:[],level:"",desc:"",time:"",actors:[],videos:[],videoImg:"",status:"",releaseData:""}),u=c({images:[{id:1,url:"",alt:""}]}),_=()=>{const d={id:u.value.images.length+1,url:"",alt:""};u.value.images.push(d)},k=d=>{u.value.images.length!==1&&u.value.images.splice(d,1)},C=async(d,r)=>{const a=d.target.files[0],n=new FormData;n.append("image",a);try{const i=await w.post("https://crazymovie.onrender.com/api/upload/image",n,{headers:{"Content-Type":"multipart/form-data"}});u.value.images[r].url=i.data.data.fileUrl}catch(i){console.error(i)}},E=()=>{t.value.imgs.push(g.value),t.value.actors.push(m.value),t.value.videos.push(v.value),I({...t.value}),t.value.name="",t.value.director="",t.value.level="",t.value.desc="",t.value.time="",t.value.imgs=[],t.value.actors=[],t.value.videos=[],t.value.videoImg="",t.value.status="",t.value.releaseData="",u.value.images=[{id:1,url:"",alt:""}]},I=async d=>{const r=d;try{await w.post("https://crazymovie.onrender.com/api/movie",{name:`${r.name}`,director:`${r.director}`,imgs:[`${r.imgs[0]}`],level:`${r.level}`,desc:`${r.desc}`,time:`${r.time}`,actors:[`${r.actors[0]}`],videos:[`${r.videos[0]}`],videoImg:`${r.videoImg}`,status:`${r.status}`,releaseData:`${r.releaseData}`})&&x()}catch(a){console.log("新增電影失敗"),console.log(a)}},x=()=>{h.push("/admin/movies")};return(d,r)=>(f(),b("div",A,[e("div",{class:"bg-[#171818] backdrop-blur-sm overflow-auto rounded-[20px] p-[20px]",onClick:r[11]||(r[11]=y(()=>{},["stop"]))},[N,e("form",{onSubmit:y(E,["prevent"])},[e("div",F,[e("div",L,[l(e("input",{id:"floating_movie_title","onUpdate:modelValue":r[0]||(r[0]=a=>t.value.name=a),type:"text",class:"block rounded-t-lg px-2.5 pb-2.5 pt-6 w-full text-sm text-[#E7C673] bg-gray-50 dark:bg-gray-700 border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-[#E7C673] focus:outline-none focus:ring-0 focus:border-[#E7C673] peer",placeholder:" ",required:""},null,512),[[s,t.value.name]]),R]),e("div",T,[l(e("input",{id:"director","onUpdate:modelValue":r[1]||(r[1]=a=>t.value.director=a),type:"text",class:"block rounded-t-lg px-2.5 pb-2.5 pt-6 w-full text-sm text-[#E7C673] bg-gray-50 dark:bg-gray-700 border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-[#E7C673] focus:outline-none focus:ring-0 focus:border-[#E7C673] peer",placeholder:" ",required:""},null,512),[[s,t.value.director]]),j]),e("div",P,[l(e("input",{id:"level","onUpdate:modelValue":r[2]||(r[2]=a=>t.value.level=a),type:"text",class:"block rounded-t-lg px-2.5 pb-2.5 pt-6 w-full text-sm text-[#E7C673] bg-gray-50 dark:bg-gray-700 border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-[#E7C673] focus:outline-none focus:ring-0 focus:border-[#E7C673] peer",placeholder:" ",required:""},null,512),[[s,t.value.level]]),G]),e("div",H,[l(e("input",{id:"time","onUpdate:modelValue":r[3]||(r[3]=a=>t.value.time=a),type:"text",class:"block rounded-t-lg px-2.5 pb-2.5 pt-6 w-full text-sm text-[#E7C673] bg-gray-50 dark:bg-gray-700 border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-[#E7C673] focus:outline-none focus:ring-0 focus:border-[#E7C673] peer",placeholder:" ",required:""},null,512),[[s,t.value.time]]),J]),e("div",K,[l(e("input",{id:"imgs","onUpdate:modelValue":r[4]||(r[4]=a=>g.value=a),type:"text",class:"block rounded-t-lg px-2.5 pb-2.5 pt-6 w-full text-sm text-[#E7C673] bg-gray-50 dark:bg-gray-700 border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-[#E7C673] focus:outline-none focus:ring-0 focus:border-[#E7C673] peer",placeholder:" ",required:""},null,512),[[s,g.value]]),O]),e("div",Q,[l(e("input",{id:"actors","onUpdate:modelValue":r[5]||(r[5]=a=>m.value=a),type:"text",class:"block rounded-t-lg px-2.5 pb-2.5 pt-6 w-full text-sm text-[#E7C673] bg-gray-50 dark:bg-gray-700 border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-[#E7C673] focus:outline-none focus:ring-0 focus:border-[#E7C673] peer",placeholder:" ",required:""},null,512),[[s,m.value]]),W]),e("div",X,[l(e("input",{id:"videos","onUpdate:modelValue":r[6]||(r[6]=a=>v.value=a),type:"text",class:"block rounded-t-lg px-2.5 pb-2.5 pt-6 w-full text-sm text-[#E7C673] bg-gray-50 dark:bg-gray-700 border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-[#E7C673] focus:outline-none focus:ring-0 focus:border-[#E7C673] peer",placeholder:" ",required:""},null,512),[[s,v.value]]),Y]),e("div",Z,[l(e("input",{id:"videoImg","onUpdate:modelValue":r[7]||(r[7]=a=>t.value.videoImg=a),type:"text",class:"block rounded-t-lg px-2.5 pb-2.5 pt-6 w-full text-sm text-[#E7C673] bg-gray-50 dark:bg-gray-700 border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-[#E7C673] focus:outline-none focus:ring-0 focus:border-[#E7C673] peer",placeholder:" ",required:""},null,512),[[s,t.value.videoImg]]),ee]),e("div",re,[l(e("input",{id:"status","onUpdate:modelValue":r[8]||(r[8]=a=>t.value.status=a),type:"text",class:"block rounded-t-lg px-2.5 pb-2.5 pt-6 w-full text-sm text-[#E7C673] bg-gray-50 dark:bg-gray-700 border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-[#E7C673] focus:outline-none focus:ring-0 focus:border-[#E7C673] peer",placeholder:" ",required:""},null,512),[[s,t.value.status]]),te]),e("div",ae,[l(e("input",{id:"releaseData","onUpdate:modelValue":r[9]||(r[9]=a=>t.value.releaseData=a),type:"text",class:"block rounded-t-lg px-2.5 pb-2.5 pt-6 w-full text-sm text-[#E7C673] bg-gray-50 dark:bg-gray-700 border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-[#E7C673] focus:outline-none focus:ring-0 focus:border-[#E7C673] peer",placeholder:" ",required:""},null,512),[[s,t.value.releaseData]]),oe]),e("div",le,[l(e("textarea",{id:"desc","onUpdate:modelValue":r[10]||(r[10]=a=>t.value.desc=a),class:"block rounded-t-lg px-2.5 pb-2.5 pt-6 w-full text-sm text-[#E7C673] bg-gray-50 dark:bg-gray-700 border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-[#E7C673] focus:outline-none focus:ring-0 focus:border-[#E7C673] peer",placeholder:" ",required:""},null,512),[[s,t.value.desc]]),se]),e("div",de,[(f(!0),b(z,null,$(u.value.images,(a,n)=>(f(),b("div",{key:n},[e("label",{for:"image-"+n},"圖片URL："+D(a.url),9,ne),e("input",{id:"image-"+n,type:"file",onChange:i=>C(i,n)},null,40,ue),a.url?(f(),b("img",{key:0,src:a.url,class:""},null,8,ie)):q("",!0),e("button",{type:"button",class:"bg-blue-500 text-white px-4 py-2 rounded",onClick:_}," 新增圖片 "),e("button",{type:"button",class:"bg-red-500 text-white px-4 py-2 rounded ml-2",onClick:i=>k(n)}," 刪除圖片 ",8,ce)]))),128))])]),e("div",{class:"flex justify-end"},[pe,e("button",{class:"bg-red-500 text-white px-4 py-2 rounded ml-2",onClick:x}," 取消 ")])],40,B)])]))}},ge=U(fe,[["__scopeId","data-v-f3f3d1f4"]]);export{ge as default};
